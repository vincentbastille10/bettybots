<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Betty — Configuration</title>
  <style>
    :root{--bg:#0f172a;--card:#111827;--text:#e5e7eb;--muted:#9ca3af;--btn:#2563eb;--pill:#1f2937}
    *{box-sizing:border-box;font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Arial}
    body{margin:0;background:var(--bg);color:var(--text)}
    .wrap{max-width:980px;margin:40px auto;padding:0 16px}
    h1{font-size:28px;margin:0 0 12px}
    .muted{color:var(--muted)}
    .card{background:var(--card);border:1px solid #1f2937;border-radius:14px;padding:22px;margin:18px 0}
    .row{display:grid;grid-template-columns:1fr 2fr;gap:16px;align-items:center;padding:12px 0;border-bottom:1px dashed #1f2937}
    .row:last-child{border-bottom:0}
    select{width:100%;padding:12px 14px;border-radius:10px;border:1px solid #374151;background:#0b1220;color:var(--text)}
    .swatches{display:flex;gap:10px;flex-wrap:wrap}
    .swatch{width:36px;height:36px;border-radius:999px;border:2px solid #0b1220;cursor:pointer;outline:2px solid transparent;position:relative}
    .swatch.active{outline:2px solid #fff}
    .avatars{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
    .avatar{border:2px solid #1f2937;border-radius:12px;overflow:hidden;background:#0b1220;cursor:pointer}
    .avatar img{width:100%;height:180px;object-fit:cover}
    .avatar.active{border-color:#fff;box-shadow:0 0 0 2px #fff inset}
    .btns{display:flex;gap:10px;flex-wrap:wrap;margin-top:20px}
    button{background:var(--btn);border:none;color:#fff;padding:12px 16px;border-radius:10px;cursor:pointer;font-weight:600}
    button.secondary{background:#334155}
    .pill{display:inline-block;padding:6px 10px;background:var(--pill);border-radius:999px;font-size:12px;color:#cbd5e1}
  </style>
</head>
<body>
<div class="wrap">
  <h1>Configuration de votre bot</h1>
  <div class="muted">Bienvenue {{ name }} ({{ email }}) — tenant: <span class="pill">{{ tenant }}</span></div>

  <form id="cfgForm" method="post" action="/save">
    <input type="hidden" name="tenant" value="{{ tenant }}"/>

    <div class="card">
      <div class="row">
        <label>Métier</label>
        <div>
          <select name="role" id="role">
            <option value="psychologue">Psychologue</option>
            <option value="agent-immobilier">Agent Immobilier</option>
            <option value="avocat">Avocat / Avocate</option>
            <option value="medecin">Médecin</option>
            <option value="comptable">Comptable</option>
            <option value="danse">Danse (assistant·e)</option>
          </select>
        </div>
      </div>

      <div class="row">
        <label>Couleur</label>
        <div class="swatches" id="swatches">
          <div class="swatch" data-color="#2563eb" style="background:#2563eb"></div>
          <div class="swatch" data-color="#16a34a" style="background:#16a34a"></div>
          <div class="swatch" data-color="#9333ea" style="background:#9333ea"></div>
          <div class="swatch" data-color="#ef4444" style="background:#ef4444"></div>
          <div class="swatch" data-color="#f59e0b" style="background:#f59e0b"></div>
          <div class="swatch" data-color="#0ea5e9" style="background:#0ea5e9"></div>
          <div class="swatch" data-color="#111827" style="background:#111827"></div>
          <div class="swatch" data-color="#e5e7eb" style="background:#e5e7eb"></div>
        </div>
        <input type="hidden" name="color" id="color" value="#2563eb"/>
      </div>

      <div class="row">
        <label>Avatar</label>
        <div class="avatars" id="avatars">
          <label class="avatar">
            <input type="radio" name="avatar" value="https://i.ibb.co/bjqWmV09/Betty-Medecine-copie.jpg" style="display:none">
            <img src="https://i.ibb.co/bjqWmV09/Betty-Medecine-copie.jpg" alt="Betty Médecine">
          </label>
          <label class="avatar">
            <input type="radio" name="avatar" value="https://i.ibb.co/CKFQ2cdN/Betty-Agent-immo-copie.jpg" style="display:none">
            <img src="https://i.ibb.co/CKFQ2cdN/Betty-Agent-immo-copie.jpg" alt="Betty Agent Immobilier">
          </label>
          <label class="avatar">
            <input type="radio" name="avatar" value="https://i.ibb.co/xKr7s8Nk/Betty-Avocate-copie.jpg" style="display:none">
            <img src="https://i.ibb.co/xKr7s8Nk/Betty-Avocate-copie.jpg" alt="Betty Avocate">
          </label>
        </div>
      </div>
    </div>

    <div class="btns">
      <button type="submit">Enregistrer et prévisualiser</button>
      <button type="button" class="secondary" onclick="window.location='/'">Retour accueil</button>
    </div>
  </form>
</div>

<script>
  // Couleur
  const sw = document.querySelectorAll('.swatch');
  const colorHidden = document.getElementById('color');
  sw.forEach(el=>{
    el.addEventListener('click', ()=>{
      sw.forEach(s=>s.classList.remove('active'));
      el.classList.add('active');
      colorHidden.value = el.dataset.color;
    });
  });
  // Avatar
  const labels = document.querySelectorAll('.avatar');
  labels.forEach(l=>{
    l.addEventListener('click', ()=>{
      labels.forEach(x=>x.classList.remove('active'));
      l.classList.add('active');
    });
  });
</script>
</body>
</html>
